# 🎮 ローグライク探索ゲーム

Elonaにインスパイアされた、Webブラウザで遊べる本格ローグライクゲーム。
ランダム生成されるダンジョンを探索し、敵を倒し、装備を集め、スキルを駆使して深い階層を目指そう！

[![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=flat&logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![Vite](https://img.shields.io/badge/Vite-646CFF?style=flat&logo=vite&logoColor=white)](https://vitejs.dev/)

---

## ✨ 主要機能

### 🏰 ダンジョンタイプシステム
ゲーム開始時に4種類のダンジョンから選択！

| ダンジョン | 特徴 | 敵の種類 | 環境効果 |
|-----------|------|----------|----------|
| 🦁 **野獣の洞窟** | 野生動物の巣窟 | ネズミ、狼、コボルド | 暗闇（防御-10%） |
| 💀 **忘れられた墓地** | アンデッドの住処 | ゾンビ、スケルトン、ヴァンパイア | 死の瘴気（HP-1/ターン） |
| 🏰 **放棄された要塞** | 訓練された兵士 | ゴブリン、オーク、オーガ | 戒厳令（敵攻撃+15%） |
| 🗼 **魔法使いの塔** | 魔法生物の巣 | デーモン、ドラゴン、リッチ | 魔力の奔流（MP+2/ターン） |

### 🗺️ ダンジョン探索
- **3種類のマップ生成アルゴリズム**: 部屋型・洞窟型・BSP分割型（ダンジョンごとに出現確率が異なる）
- **無限階層システム**: どこまでも深く潜れる
- **FOV（視界）システム**: 探索済みエリアを記憶
- **環境効果**: ダンジョン固有の特殊効果が一定階層ごとに発動

### ⚔️ 戦闘システム
- **ターン制戦闘**: 戦略的に敵と戦う
- **ダンジョン固有の敵**: 各ダンジョンで異なる敵が出現
- **エリート敵**: ★マーク付きの強化版（ステータス1.3-1.5倍、報酬2倍）
- **8種類のアクティブスキル**: 強打、範囲攻撃、回復、ファイアボール、テレポート等
- **ステータス効果**: 毒、麻痺、混乱、再生、強化/弱体
- **クリティカルヒット**: 運次第で大ダメージ

### 🎯 スキルシステム

| キー | スキル名 | 効果 |
|-----|---------|------|
| `1` | 💥 強打 | 2倍ダメージの単体攻撃 |
| `3` | 🌀 範囲斬り | 周囲の敵全てを攻撃 |
| `5` | ✨ 回復の祈り | HP 50回復 |
| `7` | 🔥 ファイアボール | 遠距離範囲攻撃 |
| `9` | ⚡ テレポート | ランダムな場所へ瞬間移動 |
| `Q` | 💢 バーサーク | 攻撃力2倍バフ |
| `E` | ❄️ 氷の壁 | 周囲の敵を遅延 |
| `R` | 🩸 ライフスティール | 攻撃＋HP吸収 |

### 🎒 アイテム＆装備
- **装備システム**: 武器・防具・アクセサリー
- **レア度システム**: Common → Uncommon → Rare → Epic → Legendary
- **接頭辞/接尾辞**: 「炎の剣」「氷結の鎧」等のランダム生成
- **消費アイテム**: 回復ポーション、巻物

### 💎 メタプログレッション
死亡しても次のプレイに引き継がれる永続アップグレード！

- 最大HP増加
- 最大MP増加
- 攻撃力強化
- 防御力強化
- 初期ゴールド増加

### 📅 デイリーチャレンジ
毎日3つのランダムミッションに挑戦！
- 敵を倒す
- ボスを倒す
- 宝箱を開ける
- アイテムを収集する
- 階層に到達する
- ゴールドを獲得する
- ターンを生き延びる

完了するとメタポイント＋ゴールド報酬をゲット！

### 🏆 その他の特徴
- **ボスエンカウント**: 5階層ごとに強力なボス
- **宝箱システム**: 罠付き宝箱からレアアイテム
- **商人システム**: ゴールドでアイテムを売買
- **詳細な統計画面**: ゲームオーバー時にスコアと成績を表示
- **ミニマップ**: 現在位置を把握

---

## 🚀 セットアップ

### 必要環境
- Node.js 16.x 以上
- モダンWebブラウザ（Chrome、Firefox、Safari、Edge）

### インストール＆起動

```bash
# リポジトリをクローン
git clone https://github.com/fukudat412/roguelike-game.git
cd roguelike-game

# 依存関係をインストール
npm install

# 開発サーバーを起動
npm run dev

# ブラウザで開く
# http://localhost:5173/
```

### ビルド

```bash
# 本番用ビルド
npm run build

# distディレクトリにビルドされたファイルが生成されます
```

---

## 🎮 操作方法

### 基本操作

#### 移動
- `W` `A` `S` `D` - 上下左右に移動
- `↑` `↓` `←` `→` - 矢印キーでも移動可能
- `2` `4` `6` `8` - テンキーでも移動可能

#### アクション
- `スペース` - 待機（ターンスキップ）
- `G` - アイテムを拾う / 宝箱を開ける
- `I` - インベントリを開く/閉じる
- `>` または `.` または `Enter` - 階段を降りる
- `T` - 商人と取引
- `M` - メタプログレッション画面を開く
- `Esc` - キャンセル

#### スキル
- `1` - スキル1（強打）
- `3` - スキル2（範囲斬り）
- `5` - スキル3（回復の祈り）
- `7` - スキル4（ファイアボール）
- `9` - スキル5（テレポート）
- `Q` - スキル6（バーサーク）
- `E` - スキル7（氷の壁）
- `R` - スキル8（ライフスティール）

### インベントリ操作

1. `I` キーでインベントリを開く
2. アイテムをクリックして選択
3. `使う (U)` ボタンで装備/消費
4. `捨てる (Q)` ボタンで地面に配置
5. `I` または `Esc` で閉じる

---

## 🎯 ゲームの目標

1. **深い階層を目指す**: 無限に続くダンジョンの奥深くへ
2. **敵を倒す**: 15種類以上の多彩な敵
3. **装備を強化**: レアアイテムを見つけて装備
4. **スキルをマスター**: 8種類のスキルを使いこなす
5. **メタ進行**: 死んでも次のプレイが有利に
6. **デイリーチャレンジ**: 毎日の目標を達成
7. **ハイスコア**: より高いスコアを目指す

---

## 📊 実装済みフェーズ

### ✅ Phase 1: MVP（基本システム）
- プロジェクトセットアップ
- ゲームループと基盤
- マップシステム（ランダム生成、FOV）
- プレイヤーシステム
- 敵システム（15種類）
- 戦闘システム
- UIシステム

### ✅ Phase 2: コアゲームプレイ
- インベントリシステム
- 装備システム
- アイテムシステム（レア度、接頭辞/接尾辞）
- 多階層ダンジョン
- 難易度スケーリング

### ✅ Phase 3: 拡張機能
- **Phase 3-1**: デイリーチャレンジシステム
- **Phase 3-2**: 複数ダンジョンシステム
  - 4種類のダンジョンタイプ実装
  - ダンジョン固有の敵プールとスポーンロジック
  - エリート敵システム（★マーク付き強化版）
  - 環境効果システム（ダンジョン固有の特殊効果）
  - ダンジョン選択UI

### ✅ その他実装済み機能
- スキルシステム（8種類）
- メタプログレッションシステム
- ボスエンカウント
- 宝箱システム
- 商人システム
- ステータス効果システム
- 詳細ゲームオーバー画面（スコア計算）
- ゲームバランス調整

---

## 🛠️ 技術スタック

- **言語**: TypeScript（厳格モード）
- **ビルドツール**: Vite
- **レンダリング**: HTML5 Canvas 2D API
- **アーキテクチャ**: イベント駆動（EventBus）
- **永続化**: LocalStorage

---

## 📁 プロジェクト構造

```
src/
├── core/          # ゲームループ、状態管理、入力
├── renderer/      # Canvas描画
├── world/         # マップ生成、タイル
├── entities/      # プレイヤー、敵、アイテム
├── combat/        # 戦闘システム
├── character/     # スキル、メタプログレッション
├── items/         # アイテム生成、接頭辞/接尾辞
├── ai/            # パスファインディング、AI
├── ui/            # UI管理、メッセージログ
├── data/          # ゲームデータ（敵、アイテム）
└── utils/         # ユーティリティ
```

詳細は [CLAUDE.md](./CLAUDE.md) を参照してください。

---

## 🎨 ゲーム画面

```
┌─────────────────────────────────────────────┐
│ HP: 100/100  MP: 50/50  攻撃: 15  防御: 8   │
│ ゴールド: 350  階層: 7                      │
├─────────────────────────────────────────────┤
│ [スキル一覧]                                │
│ 💥強打[1] 🌀範囲斬り[3] ✨回復[5] ...      │
├─────────────────────────────────────────────┤
│ [装備中]                                    │
│ 武器: 鋼の剣(Rare)  防具: チェインメイル   │
├─────────────────────────────────────────────┤
│ [今日のチャレンジ]                          │
│ ✓ 敵を10体倒す (10/10) +50MP              │
│ ○ ボスを1体倒す (0/1) +250MP              │
│ ○ 5階層に到達 (7/5) +50MP                 │
├─────────────────────────────────────────────┤
│                                             │
│    ######   ######                          │
│    #....#   #....####                       │
│    #.@..+   +........#                      │
│    #....#   #...g....#                      │
│    ######   ######+###                      │
│                                             │
│ [@=プレイヤー g=ゴブリン >=階段]           │
├─────────────────────────────────────────────┤
│ [メッセージログ]                            │
│ > あなたはゴブリンに8ダメージを与えた！   │
│ > ゴブリンを倒した！15ゴールドを獲得      │
└─────────────────────────────────────────────┘
```

---

## 🐛 既知の課題

- 敵が多い場合のパフォーマンス低下
- モバイル対応なし
- セーブ/ロード機能未実装（メタ進行のみ永続化）

---

## 🚧 今後の予定

### 短期
- [ ] Phase 3-2の完了（敵AI改善、装備バリエーション）
- [ ] セーブ/ロード機能
- [ ] キー操作ガイド

### 中期
- [ ] クエストシステム
- [ ] キャラクタークラス（戦士、魔法使い等）
- [ ] スキルツリー

### 長期
- [ ] マルチプレイヤー要素
- [ ] モバイル対応
- [ ] バイオームシステム

---

## 🤝 コントリビューション

バグ報告や機能提案は [GitHub Issues](https://github.com/fukudat412/roguelike-game/issues) へお願いします。

プルリクエストも歓迎します！

---

## 📝 ライセンス

このプロジェクトは教育目的で作成されています。

---

## 🔗 リンク

- **リポジトリ**: https://github.com/fukudat412/roguelike-game
- **開発者ドキュメント**: [CLAUDE.md](./CLAUDE.md)

---

## 💡 Tips

### 初心者向け
1. **まずは回復ポーションを集めよう**: 生存が最優先
2. **敵に囲まれないように**: 1対1の戦闘を心がける
3. **スキルを惜しまず使おう**: MPは階層移動で回復
4. **装備を強化**: レアアイテムを積極的に装備

### 上級者向け
1. **メタプログレッションを活用**: 死んでも次が有利に
2. **デイリーチャレンジをクリア**: 効率的にメタポイント獲得
3. **ボス戦前に準備**: HP/MPを満タンに
4. **スキルの組み合わせ**: 範囲攻撃→単体攻撃で効率的に

---

**楽しいダンジョン探索を！** 🎮✨
