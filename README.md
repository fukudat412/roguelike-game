# ローグライク探索ゲーム - Phase 1 MVP

Elonaのような無限に遊べるローグライク探索ゲームのMVP（最小実行可能プロダクト）が完成しました。

## 実装された機能

### Phase 1: MVP完了

✅ **プロジェクトセットアップ**
- TypeScript + Vite環境
- Canvas描画基盤
- レスポンシブなUI

✅ **ゲームループと基盤**
- 固定タイムステップのゲームループ
- イベント駆動システム（EventBus）
- ゲーム状態管理（プレイヤーターン/敵ターン）
- キーボード入力システム（WASD/矢印キー/テンキー）

✅ **マップシステム**
- ランダムルーム生成アルゴリズム
- タイルベースのマップ（床、壁）
- FOV（視界）システム
- マップ探索記憶機能

✅ **プレイヤーシステム**
- 移動とアニメーション
- ステータス管理（HP、攻撃力、防御力）
- 経験値とレベルアップ
- カメラ追従

✅ **敵システム**
- 3種類の敵（ゴブリン、オーク、トロール）
- シンプルなAI（プレイヤーに近づく）
- ランダム配置

✅ **戦闘システム**
- ターン制戦闘
- ダメージ計算（攻撃力 - 防御力/2 ± ランダム変動）
- クリティカルヒット（10%確率で2倍）
- 隣接攻撃

✅ **UI システム**
- リアルタイムステータス表示
- メッセージログ（戦闘ログ、イベント）
- ゲームオーバー画面
- リスタート機能

## 起動方法

```bash
# 依存関係をインストール（初回のみ）
npm install

# 開発サーバーを起動
npm run dev

# ブラウザで開く
# http://localhost:3000/
```

## 操作方法

### 移動
- **WASD**: 上下左右移動
- **矢印キー**: 上下左右移動
- **テンキー (2468)**: 上下左右移動

### アクション
- **敵に向かって移動**: 攻撃
- **スペースキー**: 待機

## ゲームの目標

現在のMVPでは以下が可能です：
1. ダンジョンを探索する
2. 敵と戦闘する
3. 経験値を獲得してレベルアップする
4. HPが0になるまで生き延びる

## プロジェクト構造

```
game_1/
├── index.html              # エントリーポイント
├── package.json            # npm設定
├── tsconfig.json          # TypeScript設定
├── vite.config.ts         # Vite設定
└── src/
    ├── main.ts            # アプリケーション初期化
    ├── core/              # ゲームループ、状態管理、入力
    │   ├── Game.ts
    │   ├── GameState.ts
    │   ├── Input.ts
    │   └── EventBus.ts
    ├── renderer/          # Canvas描画
    │   └── Renderer.ts
    ├── world/             # マップ、タイル、生成
    │   ├── Map.ts
    │   ├── Tile.ts
    │   ├── Cell.ts
    │   └── generators/
    │       └── RoomGenerator.ts
    ├── entities/          # プレイヤー、敵、コンポーネント
    │   ├── Entity.ts
    │   ├── Player.ts
    │   ├── Enemy.ts
    │   └── components/
    │       ├── Position.ts
    │       └── Stats.ts
    ├── combat/            # 戦闘システム
    │   └── CombatSystem.ts
    ├── ui/                # UIマネージャー、メッセージログ
    │   ├── UIManager.ts
    │   └── MessageLog.ts
    └── utils/             # ユーティリティ
        └── Vector2D.ts
```

## 実装されたシステム詳細

### イベント駆動アーキテクチャ
- EventBusによる疎結合な設計
- 戦闘、移動、UI更新などすべてイベント経由

### レンダリングシステム
- Canvas 2Dコンテキスト使用
- タイルベース描画（32x32ピクセル）
- カメラシステム（プレイヤー追従）
- レイヤー管理（マップ → エンティティ → UI）

### マップ生成
- ランダムルーム配置アルゴリズム
- L字型通路で部屋を接続
- 衝突検出

### AI システム
- シンプルな追跡AI
- 視界範囲チェック（10タイル）
- 隣接判定による攻撃

## 次のフェーズ予定（Phase 2）

Phase 2では以下の機能を実装予定：
- インベントリシステム
- 装備システム
- 消費アイテム（ポーション、巻物）
- 複数階層（階段による移動）
- 敵のバリエーション増加
- 改良されたAI

## 技術スタック

- **TypeScript**: 型安全な開発
- **Vite**: 高速なビルドツール
- **Canvas API**: 2D描画
- **イベント駆動**: 疎結合な設計

## デバッグ

開発者コンソールで以下が利用可能：
```javascript
// グローバルゲームインスタンス
window.game

// プレイヤー情報
window.game.player

// マップ情報
window.game.map

// 敵リスト
window.game.enemies
```

## トラブルシューティング

### ゲームが起動しない
1. `npm install` を実行してください
2. ブラウザのコンソールでエラーを確認してください
3. Canvasをサポートするモダンブラウザを使用してください

### パフォーマンスが悪い
- Canvasサイズを調整してください（index.html）
- FOV範囲を狭めてください（Game.ts）

## ライセンス

このプロジェクトは教育目的で作成されています。
